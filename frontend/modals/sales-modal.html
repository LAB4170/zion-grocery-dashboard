<!-- Sales Modal -->
<div id="salesModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('salesModal')">&times;</span>
        <h2 id="salesModalTitle">Create New Sale</h2>
        <form id="saleForm" onsubmit="addSale(event); return false;">
            <div class="form-group">
                <label for="saleProductInput">Product</label>
                <input type="text" id="saleProductInput" name="productName" list="productOptions" placeholder="Type to search product..." required />
                <datalist id="productOptions"></datalist>
                <small style="color:#666;font-size:12px;">Start typing to search and select an existing product</small>
            </div>
            <div class="form-group">
                <label for="saleQuantity">Quantity</label>
                <input type="number" id="saleQuantity" name="quantity" min="1" required />
            </div>
            <div class="form-group">
                <label for="saleDate">Sale Date</label>
                <div class="date-input-container">
                    <input type="date" id="saleDate" name="saleDate" required min="1940-01-01" max="2099-12-31" onclick="this.showPicker && this.showPicker()">
                    <i class="fas fa-calendar-alt date-picker-icon" onclick="openDatePicker('saleDate')" title="Select Date"></i>
                </div>
            </div>
            <div class="form-group">
                <label for="salePaymentMethod">Payment Method</label>
                <select id="salePaymentMethod" name="paymentMethod" required onchange="toggleCustomerInfo()">
                    <option value="">Select Payment Method</option>
                    <option value="cash">Cash</option>
                    <option value="mpesa">M-Pesa</option>
                    <option value="debt">Debt</option>
                </select>
            </div>
            <div class="form-group debt-fields" id="customerInfoGroup" style="display: none;">
                <label for="customerName">Customer Name</label>
                <input type="text" id="customerName" name="customerName" />
            </div>
            <div class="form-group debt-fields" id="customerPhoneGroup" style="display: none;">
                <label for="customerPhone">Customer Phone</label>
                <input type="tel" id="customerPhone" name="customerPhone" />
            </div>
            <div class="form-group">
                <label for="saleNotes">Notes (Optional)</label>
                <textarea id="saleNotes" name="notes" rows="3" placeholder="Additional notes about this sale"></textarea>
            </div>
            <button type="submit" class="btn" id="salesModalSubmit">Create Sale</button>
        </form>
    </div>
</div>
